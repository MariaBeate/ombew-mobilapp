import React, { Component } from "react";
import { Button, View, TextInput } from "react-native";
import credentials from "./data/credentials.json";

class Login extends Component {
  constructor(props) {
    super(props);

    this.onChangeUsername = this.onChangeUsername.bind(this);
    this.onChangePassword = this.onChangePassword.bind(this);
    this.handleLogin = this.handleLogin.bind(this);

    this.state = {
      credentials: credentials,
      user: "",
      pw: "",
      isLoggedIn: Boolean,
      username: "",
      password: "",
    };
  }
  componentDidMount() {
    let results = credentials.map((credential) => {
      const user = credential.username;
      const pw = credential.password;
      console.log(user);
      this.setState({ user: user });
      this.setState({ pw: pw });
    });
  }

  onChangeUsername = (value) => {
    const username = value;
    this.setState(() => ({
      username,
    }));
  };

  onChangePassword = (value) => {
    const password = value;
    this.setState(() => ({
      password,
    }));
  };

  handleLogin() {
    if (
      this.state.username === this.state.user &&
      this.state.password === this.state.pw
    ) {
      console.log("Eingeloggt");
    } else {
      console.log("Falsche Daten");
    }
  }
  render() {
    return (
      <View>
        <TextInput
          //style={styles.inputForm}
          onChangeText={this.onChangeUsername}
          placeholder="Username"
          value={this.state.username}
        />
        <TextInput
          //style={styles.inputForm}
          onChangeText={this.onChangePassword}
          placeholder="Passwort"
        />
        <Button title="Login" onPress={this.handleLogin} />
        <Button title="Logout" onPress={this.handleLogin} />
      </View>
    );
  }
}

export default Login;
